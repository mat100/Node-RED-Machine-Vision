# Production dependencies for Machine Vision Flow
# Install with: pip install -r requirements.txt
#
# Version constraints ensure compatibility across:
# - Development environments (Python 3.11+)
# - Target RISC-V systems (Python 3.9+)

# ===========================
# Web Framework
# ===========================
fastapi==0.104.1
uvicorn==0.24.0
starlette==0.27.0
python-multipart==0.0.6

# ===========================
# Async I/O
# ===========================
anyio==3.7.1
sniffio==1.3.0
h11==0.14.0

# ExceptionGroup backport for Python < 3.11 (required by anyio)
exceptiongroup>=1.0.0; python_version < '3.11'

# ===========================
# Configuration & Validation
# ===========================
# Pydantic: 1.10.x supports both Python 3.9 and 3.11
pydantic==1.10.13
python-dotenv==1.0.0

# PyYAML: Version 6.0+ required for Python 3.10+
pyyaml>=6.0.0; python_version >= '3.10'
pyyaml>=5.4.1,<6.0.0; python_version < '3.10'

typing-extensions==4.8.0

# ===========================
# Computer Vision
# ===========================
# NumPy: Use 2.0.x series for maximum compatibility
# - Python 3.9: Last supported version is 2.0.2
# - Python 3.10+: Can use 2.1+ but we stay on 2.0.x for consistency
# - Provides 6+ years of improvements over 1.18.2 with security fixes
numpy>=2.0.0,<2.1.0; python_version == '3.9'
numpy>=2.0.0,<2.1.0; python_version == '3.10'
numpy>=2.0.0; python_version >= '3.11'

# OpenCV: 4.8+ is compatible with NumPy 2.0 for all Python versions
# Use headless variant for embedded/server deployments (RISC-V, Docker, etc.)
# opencv-python-headless excludes GUI dependencies (Qt, GTK) but includes all CV algorithms
opencv-python-headless>=4.8.0; python_version >= '3.9'
